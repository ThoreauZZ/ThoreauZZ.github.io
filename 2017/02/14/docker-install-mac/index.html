<!DOCTYPE html>
<html lang="zh_CN">
<head>

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    
    
        <meta name="twitter:card" content="summary"/>
    



<meta name="twitter:title" content="Docker安装之MAC"/>
<meta name="twitter:description" content=""/>
<meta name="twitter:site" content="@zhaozhou2010"/>



  	<meta property="og:title" content="Docker安装之MAC &middot; 造舟野渡" />
  	<meta property="og:site_name" content="造舟野渡" />
  	<meta property="og:url" content="http://thoreauz.com/2017/02/14/docker-install-mac/" />

    
        
            <meta property="og:image" content="/images/cover.jpg"/>
        
    

    
    <meta property="og:description" content="" />
  	<meta property="og:type" content="article" />
    <meta property="article:published_time" content="2017-02-14T23:14:49Z" />

    
    <meta property="article:tag" content="docker" />
    
    

    <title>Docker安装之MAC &middot; 造舟野渡</title>

    
    <meta name="description" content="Docker安装之MAC 刚学习docker的时候，在linux直接通过yum安装启动后，运行docker命令，起步挺简单的。但在mac上安装" />
    

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="http://thoreauz.com/images/favicon.ico">
	  <link rel="apple-touch-icon" href="http://thoreauz.com/images/apple-touch-icon.png" />

    <link rel="stylesheet" type="text/css" href="http://thoreauz.com/css/screen.css" />
    <link rel="stylesheet" type="text/css" href="http://thoreauz.com/css/nav.css" />

    

    
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/atelier-forest-light.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>
        
          
            <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/languages/go.min.js"></script>
          
            <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/languages/lua.min.js"></script>
          
            <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/languages/vim.min.js"></script>
          
            <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/languages/yaml.min.js"></script>
          
            <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/languages/dockerfile.min.js"></script>
          
        
        <script>hljs.initHighlightingOnLoad();</script>
    

    
      
          <link href="http://thoreauz.com/index.xml" rel="alternate" type="application/rss+xml" title="造舟野渡" />
      
      
    
    <meta name="generator" content="Hugo 0.54.0" />

    <link rel="canonical" href="http://thoreauz.com/2017/02/14/docker-install-mac/" />

    
      
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": ,
        "logo": http://thoreauz.comDog-b.svg
    },
    "author": {
        "@type": "Person",
        "name": ,
        
        "image": {
            "@type": "ImageObject",
            "url": http://thoreauz.comDog-b.svg,
            "width": 250,
            "height": 250
        }, 
        
        "url": http://thoreauz.com,
        "sameAs": [
            
            
             
             
             
             
             
            
        ]
    },
    "headline": Docker安装之MAC,
    "name": Docker安装之MAC,
    "wordCount": 1458,
    "timeRequired": "PT3M",
    "inLanguage": {
      "@type": "Language",
      "alternateName": en
    },
    "url": http://thoreauz.com/2017/02/14/docker-install-mac/,
    "datePublished": 2017-02-14T23:14Z,
    "dateModified": 2017-02-14T23:14Z,
    
    "keywords": docker,
    "description": ,
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": http://thoreauz.com/2017/02/14/docker-install-mac/
    }
}
    </script>
    


    

    
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-113511621-1', 'auto');
      ga('send', 'pageview');

    </script>
    

    
    
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
        </script>
    

    
</head>
<body class="nav-closed">

  <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
        
        
        
            
            <li class="nav-opened" role="presentation">
            	<a href="http://thoreauz.com/archives/">归档</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="http://thoreauz.com/tags/">标签</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="http://thoreauz.com/about/">关于</a>
            </li>
        
        
    </ul>

    
    <a class="subscribe-button icon-feed" href="http://thoreauz.com/index.xml">Subscribe</a>
    
</div>
<span class="nav-cover"></span>


 <div class="site-wrapper">



<header class="main-header post-head no-cover">
  <nav class="main-nav clearfix">


  
       <a class="blog-logo" href="http://thoreauz.com"><img src="http://thoreauz.com/Dog-b.svg" alt="Home" /></a>
      
  
  
      <a class="menu-button" href="#"><span class="burger">&#9776;</span><span class="word">Menu</span></a>
  
  </nav>
</header>


<main class="content" role="main">


  <article class="post post">

    <header class="post-header">
        <h1 class="post-title">Docker安装之MAC</h1>
        <small></small>

        <section class="post-meta">
        
          <time class="post-date" datetime="2017-02-14T23:14:49Z">
            2017-02-14
          </time>
        
         
          <span class="post-tag small"><a href="http://thoreauz.com/tags/docker/">docker</a></span>
         
        </section>
    </header>

    <section class="post-content">
      

<h1 id="docker安装之mac">Docker安装之MAC</h1>

<p>刚学习docker的时候，在linux直接通过yum安装启动后，运行docker命令，起步挺简单的。但在mac上安装时，发现有一堆组件，完全不知道都是干嘛的，一团乱麻。本文介绍mac上安装卸载docker，并介绍docker在mac的运行机制。</p>

<!-- more -->

<h2 id="一-mac安装docekr">一、MAC安装docekr</h2>

<h2 id="下载安装">下载安装</h2>

<p>到docker官网下在<code>DockerToolbox.pkg</code>,按提示安装介绍。</p>

<p>查看版本和虚拟机。</p>

<pre><code class="language-bash">$ docker-machine version
docker-machine version 0.8.2, build e18a919

$ docker-machine ls
NAME   ACTIVE   DRIVER   STATE   URL   SWARM   DOCKER   ERRORS
</code></pre>

<h2 id="启动">启动</h2>

<p><img src="http://thoreauz.com/images/2017-02-14-22-15-37.jpg" alt="" /><br />
点击 <code>Docker Quickstart Terminal</code>。</p>

<p><img src="http://thoreauz.com/images/2017-02-14-22-18-42.jpg" alt="" /><br />
可以看到，自动在VirtualBox创建了一个虚拟机，启动了docker daemon，并通过<code>docker-machine env default</code>连接上docker，docker ip 是192.168.99.100。<br />
再运行上面的命令，可以看到了一台machine <code>default</code>。</p>

<pre><code class="language-bash">docker-machine ls
NAME      ACTIVE   DRIVER       STATE     URL                         SWARM   DOCKER    ERRORS
default   -        virtualbox   Running   tcp://192.168.99.100:2376           v1.13.1
</code></pre>

<p>查看docker的版本</p>

<pre><code>$ docker version

Client:
 Version:      1.12.6
 API version:  1.24
 Go version:   go1.6.4
 Git commit:   78d1802
 Built:        Wed Jan 11 00:23:16 2017
 OS/Arch:      darwin/amd64

Server:
 Version:      1.13.1
 API version:  1.26
 Go version:   go1.7.5
 Git commit:   092cba3
 Built:        Wed Feb  8 08:47:51 2017
 OS/Arch:      linux/amd64
</code></pre>

<p>运行第一个容器</p>

<pre><code class="language-bash">docker run hello-world
Unable to find image 'hello-world:latest' locally
latest: Pulling from library/hello-world

78445dd45222: Pull complete 
Digest: sha256:c5515758d4c5e1e838e9cd307f6c6a0d620b5e07e6f927b07d05f6d12a1ac8d7
Status: Downloaded newer image for hello-world:latest

Hello from Docker!
This message shows that your installation appears to be working correctly.

To generate this message, Docker took the following steps:
 1. The Docker client contacted the Docker daemon.
 2. The Docker daemon pulled the &quot;hello-world&quot; image from the Docker Hub.
 3. The Docker daemon created a new container from that image which runs the
    executable that produces the output you are currently reading.
 4. The Docker daemon streamed that output to the Docker client, which sent it
    to your terminal.

To try something more ambitious, you can run an Ubuntu container with:
 $ docker run -it ubuntu bash

Share images, automate workflows, and more with a free Docker ID:
 https://cloud.docker.com/

For more examples and ideas, visit:
 https://docs.docker.com/engine/userguide/
</code></pre>

<p>查看二进制文件已经安装到mac</p>

<pre><code class="language-bash">ll /usr/local/bin/docker*
-rwxr-xr-x  1 zhaozhou  admin    13M  1 11 08:28 /usr/local/bin/docker
-rwxr-xr-x  1 zhaozhou  admin   5.1M  1 11 13:49 /usr/local/bin/docker-compose
-rwxr-xr-x  1 zhaozhou  admin    28M  1 11 13:49 /usr/local/bin/docker-machine
</code></pre>

<p>目前，还在快速启动的终端操作，但是如果想换成<code>iTerm</code>，打开iTerm，发现连不上Docker daemon。</p>

<pre><code>$ docker ps
Cannot connect to the Docker daemon. Is the docker daemon running on this host?
</code></pre>

<p>继续运行命令</p>

<pre><code>$ docker-machine env
export DOCKER_TLS_VERIFY=&quot;1&quot;
export DOCKER_HOST=&quot;tcp://192.168.99.100:2376&quot;
export DOCKER_CERT_PATH=&quot;/Users/zhaozhou/.docker/machine/machines/default&quot;
export DOCKER_MACHINE_NAME=&quot;default&quot;
# Run this command to configure your shell:
# eval $(docker-machine env)
</code></pre>

<p>可以看到提示我们通过<code>eval $(docker-machine env)</code>配置连接即可。</p>

<p>至此，在mac安装docker安装完毕。</p>

<h2 id="二-docker在mac上运行机制">二、docker在mac上运行机制</h2>

<p>我们看到，安装DockerToolbox后，会自动安装以下组件：<br />
* docker-machine：管理 docker 主机，支持在 virtualbox上直接创建一个安装了 docker 的主机。我们主要使用这个命令管理在 virtualbox 上的机器。<br />
* docker-compose：主要用来做容器编排。<br />
* docker-client：运行在 mac 上其实只是 docker 客户端，通过客户端操作virtualbox上的docker daemon。<br />
* kitematic：图形化的容器管理界面，目前还是 beta 版本。<br />
*  virtualbox：开源虚拟机软件</p>

<p>从上面的组件我们可以看到。其实docker还是运行在虚拟机上，mac上只是通过客户端与daemon连接。</p>

<p><img src="http://thoreauz.com/images/2017-02-14-22-46-39.jpg" alt="" /><br />
这是官方给出的图，指出了各组件功能和安装<code>Docker for mac</code>和<code>Docker Toolbox</code>的区别（本文没有涉及<code>Docker for mac</code>的安装）和各组件扮演的角色。</p>

<h2 id="四-多个docker-host">四、多个docker host</h2>

<p>既然docker主机只是跑在 virtualbox上的一个虚拟机，我们就可以创建多个docekr主机。需要用前面提到的<code>docker-machine</code>管理。</p>

<p>常用命令：</p>

<pre><code class="language-bash">docker-machine ls 
docker-machine env
docker-machine stop box
docker-machine ssh vm2
docker-machine create  -d virtualbox vm2 #创建vm2 
docker-machine rm vm2
</code></pre>

<p>客户端切换docker 主机可以通过下面命令即可</p>

<pre><code class="language-bash">eval $(docker-machine env name) 
</code></pre>

<h2 id="三-卸载">三、卸载</h2>

<p>卸载Docker Toolbox安装的所有组件和数据。</p>

<h3 id="3-1-删除machine">3.1 删除machine：</h3>

<pre><code class="language-bash">$ docker-machine ls
NAME                ACTIVE   DRIVER       STATE     URL                        SWARM
dev                 *        virtualbox   Running   tcp://192.168.99.100:2376
my-docker-machine            virtualbox   Stopped
default                      virtualbox   Stopped
</code></pre>

<pre><code class="language-bash">docker-machine rm my-docker-machine
</code></pre>

<h3 id="3-2-卸载组件">3.2 卸载组件</h3>

<p>卸载<code>Quickstart Terminal</code>和<code>Kitematic</code> 等</p>

<pre><code>$ rm /usr/local/bin/docker
$ rm /usr/local/bin/docker-compose
$ rm /usr/local/bin/docker-machine
</code></pre>

<p>如果要删除一些配置数据，还得删除一个文件夹<code>~/.docker/</code><br />
最后把<code>virtualbox</code>也卸载了。</p>

    </section>
    <section class="post-toc">
      <span>CONTENTS</span>
      <nav id="TableOfContents">
<ul>
<li><a href="#docker安装之mac">Docker安装之MAC</a>
<ul>
<li><a href="#一-mac安装docekr">一、MAC安装docekr</a></li>
<li><a href="#下载安装">下载安装</a></li>
<li><a href="#启动">启动</a></li>
<li><a href="#二-docker在mac上运行机制">二、docker在mac上运行机制</a></li>
<li><a href="#四-多个docker-host">四、多个docker host</a></li>
<li><a href="#三-卸载">三、卸载</a>
<ul>
<li><a href="#3-1-删除machine">3.1 删除machine：</a></li>
<li><a href="#3-2-卸载组件">3.2 卸载组件</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
    </section>


  <footer class="post-footer">

    








<figure class="author-image">
    <a class="img" href="http://thoreauz.com" style="background-image: url(/Dog-b.svg)"><span class="hidden">二道涯's Picture</span></a>
</figure>


<section class="author">
  <h4><a href="http://thoreauz.com">二道涯</a></h4>
  
  <p>Read <a href="http://thoreauz.com">more posts</a> by this author.</p>
  
  <div class="author-meta">
    <span class="author-location icon-location">Hangzhou, China</span>
    <span class="author-link icon-link"><a href="http://thoreauz.com">http://thoreauz.com</a></span>
  </div>
</section>




    
<section class="share">
    <h4>Share this post</h4>
    <a class="icon-twitter" style="font-size: 1.4em"
       href="https://twitter.com/share?text=Docker%e5%ae%89%e8%a3%85%e4%b9%8bMAC&nbsp;-&nbsp;%e9%80%a0%e8%88%9f%e9%87%8e%e6%b8%a1&amp;url=http%3a%2f%2fthoreauz.com%2f2017%2f02%2f14%2fdocker-install-mac%2f"
       onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
        <span class="hidden">Twitter</span>
    </a>
    <a class="icon-facebook" style="font-size: 1.4em"
       href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2fthoreauz.com%2f2017%2f02%2f14%2fdocker-install-mac%2f"
       onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
        <span class="hidden">Facebook</span>
    </a>
    <a class="icon-pinterest" style="font-size: 1.4em"
       href="http://pinterest.com/pin/create/button/?url=http%3a%2f%2fthoreauz.com%2f2017%2f02%2f14%2fdocker-install-mac%2f&amp;description=Docker%e5%ae%89%e8%a3%85%e4%b9%8bMAC"
       onclick="window.open(this.href, 'pinterest-share','width=580,height=296');return false;">
        <span class="hidden">Pinterest</span>
    </a>
    <a class="icon-google-plus" style="font-size: 1.4em" href="https://plus.google.com/share?url=http%3a%2f%2fthoreauz.com%2f2017%2f02%2f14%2fdocker-install-mac%2f"
       onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
        <span class="hidden">Google+</span>
    </a>
</section>



    
     
        
<div id="gitalk-container"></div>

<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css" />
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
<script src="https://cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.min.js"></script>
<script type="text/javascript">
  var gitalk = new Gitalk({
    clientID: "2b2dad16b1a3987d6f94",
    clientSecret: "1c9113ee087febd62068f33f47c190fc4e38bf48",
    repo: "gitment-comments",
    owner: "ThoreauZZ",
    admin: ["ThoreauZZ"],
    
    id: md5(location.pathname),
    distractionFreeMode: "true"
  });
  gitalk.render("gitalk-container");
</script>

 
    



  </footer>
</article>

</main>


  <aside class="read-next">
  
      <a class="read-next-story" style="no-cover" href="http://thoreauz.com/2017/02/16/docker-network/">
          <section class="post">
              <h2>Docker网络一-默认网络</h2>
              
          </section>
      </a>
  
  
      <a class="read-next-story prev" style="no-cover" href="http://thoreauz.com/2017/02/13/spring-restful-exception-status/">
          <section class="post">
              <h2>Spring Cloud  异常处理和状态码</h2>
          </section>
      </a>
  
</aside>


    <footer class="site-footer clearfix">
        
        <div class="bsz-counter">
            <span id="busuanzi_container_site_uv">本站访客数<span id="busuanzi_value_site_uv"></span>人次;</span>
            <span id="busuanzi_container_page_pv">本文总阅读量<span id="busuanzi_value_page_pv"></span>次</span>
        </div>
        

        <section class="copyright"><a href="">造舟野渡</a> All rights reserved - 2017</section>
        
        <section class="poweredby">Proudly generated by <a class="icon-hugo" href="http://gohugo.io">HUGO</a>, with <a class="icon-theme" href="https://github.com/vjeantet/hugo-theme-casper">Casper</a> theme</section>
        

    </footer>

    </div>
    <script type="text/javascript" src="http://thoreauz.com/js/jquery.js"></script>
    <script type="text/javascript" src="http://thoreauz.com/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="http://thoreauz.com/js/index.js"></script>
    
</body>
</html>

